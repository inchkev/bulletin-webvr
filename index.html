<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebVR Test</title>
    
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras/dist/aframe-extras.min.js"></script>

    <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.1.2/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>

    <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-haptics-component/dist/aframe-haptics-component.min.js"></script>
    <script src="https://unpkg.com/aframe-tooltip-component/dist/aframe-tooltip-component.min.js"></script>
    <script src="https://unpkg.com/aframe-input-mapping-component/dist/aframe-input-mapping-component.min.js"></script>
    
    <script src="components/add-collision.js"></script>
    <script src="components/add-shaders.js"></script>
    <script src="components/model-opacity.js"></script>
    <script src="components/sides.js"></script>
    <script src="systems/interaction.js"></script>
    <script src="components/surface-interaction.js"></script>
    <script src="components/surface-ui.js"></script>
    <script src="components/controller-interaction.js"></script>
    <script src="components/ui-raycaster.js"></script>
    <script src="components/progressive-controls.js"></script>
  </head>
  
  <body class="a-body" id="body">
    <a-scene id="dlmf-scene" environment="preset: default; grid: crosses" physics="gravity: 0; debug: false" stats>
      <a-assets id="assets">
        <a-mixin id="mycursor" position="0 0 -0.5" cursor raycaster
                 geometry="primitive: ring; radiusOuter: 0.008; radiusInner: 0.005; segmentsTheta: 32"
                 material="color: white; shader: flat"
                 static-body="shape: sphere; sphereRadius: 0.001"
                 super-hands="colliderEvent: raycaster-intersection;
                              colliderEventProperty: els;
                              colliderEndEvent: raycaster-intersection-cleared;
                              colliderEndEventProperty: clearedEls;
                              colliderState:">
        </a-mixin>
        
        <a-mixin id="mytouch"
                 physics-collider
                 static-body="shape: sphere; sphereRadius: 0.05"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;
                              grabStartButtons: gripdown, mousedown;
                              grabEndButtons: gripup, mouseup;
                              stretchStartButtons: gripdown, mousedown;
                              stretchEndButtons: gripup, mouseup"
                 collision-filter="group: hands;
                                   collidesWith: surface;
                                   collisionForces: false">
        </a-mixin>
        
        <a-mixin id="surface" class="surface"
                 add-shaders="rgbcube" sides="2"
                 grabbable="maxGrabbers: 1" stretchable hoverable
                 collision-filter="group: surface; collidesWith: default, hands">
        </a-mixin>
        
        <!--a-asset-item id="04-03-F3"  src="data/04-03-F3.glb"></a-asset-item>
        <a-asset-item id="10-03-F15" src="data/10-03-F15.glb"></a-asset-item>
        <a-asset-item id="11-03-F10" src="data/11-03-F10.glb"></a-asset-item>
        <a-asset-item id="14-22-F1"  src="data/14-22-F1.glb"></a-asset-item>
        <a-asset-item id="15-03-F6"  src="data/15-03-F6.glb"></a-asset-item>
        <a-asset-item id="18-04-F8"  src="data/18-04-F8.glb"></a-asset-item>
        <a-asset-item id="23-04-F8"  src="data/23-04-F8.glb"></a-asset-item>
        <a-asset-item id="29-04-F25" src="data/29-04-F25.glb"></a-asset-item>
        <a-asset-item id="33-03-F8"  src="data/33-03-F8.glb"></a-asset-item>
        <a-asset-item id="36-03-F7b" src="data/36-03-F7b.glb"></a-asset-item-->
      </a-assets>
      
      <!-- Fancy moveable stuff -->      
      <a-entity id="surface" mixin="surface" position="0 1.2 -1"
                surface-interaction="src: data/04-03-F4.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      
      <a-entity id="surface" mixin="surface" position="-0.5 1.5 -1"
                surface-interaction="src: data/10-03-F15.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      
      <a-entity id="surface" mixin="surface" position="0 1.5 -1"
                surface-interaction="src: data/11-03-F10.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>

      <a-entity id="surface" mixin="surface" position="-0.5 1.5 -1"
                surface-interaction="src: data/10-03-F15.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="0 1.5 -1"
                surface-interaction="src: data/11-03-F10.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="0.5 1.5 -1"
                surface-interaction="src: data/14-22-F1.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="1 1.5 -1"
                surface-interaction="src: data/15-03-F6.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="-1 1 -1"
                surface-interaction="src: data/18-04-F8.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="-0.5 1 -1"
                surface-interaction="src: data/23-04-F8.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="0 1 -1"
                surface-interaction="src: data/29-04-F25.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="0.5 1 -1"
                surface-interaction="src: data/33-03-F8.glb;  scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>
      <a-entity id="surface" mixin="surface" position="1 1 -1"
                surface-interaction="src: data/36-03-F7b.glb; scale: 0.5"
                surface-ui="radius: 0.25"></a-entity>


      <!-- Controls -->
      <a-entity progressive-controls="gazeMixin: mycursor; touchMixin: mytouch; override: true">
        <a-entity id="rhand" class="right-controller" haptics controller-interaction ui-raycaster></a-entity>
        <a-entity id="lhand" class="left-controller"  haptics controller-interaction ui-raycaster></a-entity>
      </a-entity>
      
      <!-- Camera -->
      <a-entity id="cam" camera universal-controls='movementControls: universal-oculus-touch, keyboard;'></a-entity>
      
    </a-scene>
  </body>
</html>